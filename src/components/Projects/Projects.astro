---
import ProjectCard from "../ProjectCard/ProjectCard.astro";
const { data } = Astro.props;
---

<section
  id="projects"
  class="intersect box grid h-fit w-full grid-rows-[85px_min-content] overflow-hidden pb-36 pt-24"
>
  <article id="projects_headline" class="col-start-1 row-start-1 h-fit">
    <h2
      class="pb-4 text-center font-bodyfont text-5xl font-bold text-primary1 md:pb-0"
    >
      My Recent Work
    </h2>
  </article>
  <div class="row-start-2 grid grid-cols-1 grid-rows-1">
    <article
      class={data.length >= 3
        ? "col-start-1 row-start-1 gap-6 h-full grid xl:grid-cols-3 [&>div]:mt-4 sm:grid-cols-1 sm:h md:grid-cols-2 mx-auto"
        : "col-start-1 row-start-1 gap-6 h-full grid xl:grid-cols-2 xl:mx-48 [&>div]:mt-4 sm:grid-cols-1 sm:h md:grid-cols-2 mx-auto"}
    >
      {data.map((project) => <ProjectCard data={project} />)}
    </article>
  </div>
</section>

<script is:inline>
  let tl = gsap.timeline({
    scrollTrigger: {
      trigger: ".box",
      start: "top center",
      end: "70px center",
      scrub: false,
      toggleActions: "play none none reset",
    },
  });
  let tl1 = gsap.timeline({
    scrollTrigger: {
      trigger: ".box",
      start: "top center",
      end: "280px center",
      scrub: false,
      toggleActions: "play none none reset",
    },
  });

  let tl2 = gsap.timeline({
    scrollTrigger: {
      trigger: ".box",
      start: "top center",
      end: "210px center",
      scrub: false,
      toggleActions: "play none none reset",
    },
  });
  let tl3 = gsap.timeline({
    scrollTrigger: {
      trigger: ".box",
      start: "top center",
      end: "140px center",
      scrub: false,
      toggleActions: "play none none reset",
    },
  });
  let tl4 = gsap.timeline({
    scrollTrigger: {
      trigger: ".box",
      start: "top center",
      end: "140px center",
      scrub: false,
      toggleActions: "play none none reset",
    },
  });

  tl.from("#projects_headline", {
    y: 800,
  });
  tl1.from("#project_1", {
    y: 800,
    delay: 0.8,
  });
  tl2.from("#project_2", {
    y: 800,
    delay: 0.6,
  });
  tl3.from("#project_3", {
    y: 800,
    delay: 0.4,
  });
  tl4.from("#project_4", {
    y: 800,
    delay: 0.2,
  });
</script>
